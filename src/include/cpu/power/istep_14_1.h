/* SPDX-License-Identifier: GPL-2.0-only */

#include <cpu/power/scom.h>

void memDiag(void);
void istep_14_1(void);

memdiagTargets[] = {MC01_CHIPLET_ID, MC23_CHIPLET_ID};
unsigned int memdiagTargetsSize = sizeof memdiagTargets / sizeof memdiagTargets[0];

#define RRQ0Q_REG (0x701090E)
#define WRQ0Q_REG (0x701090D)

#define DSM0Q_REG   (0x701090A)
#define MBA_FARB0Q  (0x7010913)
#define MCA_ACTION1 (0x7010A07)
#define MCA_MBACALFIRQ (0x7010940)
#define MCA_FIR     (0x7010A00)

#define FIR_ACTION0 (0x7010A06)
#define FIR_ACTION1 (0x7010A07)
#define FIR_MASK (0x7010906)
#define MBACALFIR_ACTION0 (0x7010906)
#define MBACALFIR_ACTION1 (0x7010907)
#define MBACALFIR_MASK (0x7010A03)
#define ECC_REG (0x07010A0A)
#define MCBIST_MCBISTFIRACT1 (0x7012307)

#define RECR_ENABLE_UE_NOISE_WINDOW PPC_BIT(26)
#define MCA_FIR_MAINLINE_AUE    PPC_BIT(13)
#define MCA_FIR_MAINLINE_UE     PPC_BIT(14)
#define MCA_FIR_MAINLINE_IAUE   PPC_BIT(16)
#define MCA_FIR_MAINLINE_IUE    PPC_BIT(17)
#define MCA_MBACALFIRQ_PORT_FAIL PPC_BIT(13)
#define MCA_FIR_MAINLINE_RCD    PPC_BIT(15)
#define MCA_FIR_MAINTENANCE_IUE PPC_BIT(37)

#define MBA_RRQ0Q_CFG_RRQ_FIFO_MODE PPC_BIT(6)
#define MBA_WRQ0Q_CFG_WRQ_FIFO_MODE PPC_BIT(5)

#define MCBIST_MCBISTFIRQ_MCBIST_BRODCAST_OUT_OF_SYNC PPC_BIT(3)

#define PORT_OFFSET (6)
#define CHIP_EC (0x20)
