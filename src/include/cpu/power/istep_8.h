/* SPDX-License-Identifier: GPL-2.0-only */

#ifndef ISTEP_8_H
#define ISTEP_8_H

#include <cpu/power/scom.h>

void istep_8_11(void);
void istep_8_12(void);

#define AVS_CRC_DATA_MASK (0xFFFFFFF8)
#define P9_FBC_UTILS_MAX_ELECTRICAL_LINKS (3)
#define CHIP_EC (0x20)
#define SECURE_MEMORY (CHIP_EC >= 0x22)
#define ID_OFFSET (32)

typedef enum
{
	AVS_WRITE,
	AVS_READ
} avs_operation_t;

#define PU_NPU_SM2_XTS_ATRMISS_ENA PPC_BIT(63)

#define ATTR_LINK_TRAIN_BOTH (0)
#define ATTR_LINK_TRAIN_EVEN_ONLY (1)
#define ATTR_LINK_TRAIN_ODD_ONLY (2)
#define ATTR_LINK_TRAIN_NONE (3)

#define ATTR_FREQ_PB_MHZ (1866)
#define ATTR_PROC_NPU_REGION_ENABLED (1)

#define LO_LIMIT_R (ATTR_FREQ_PB_MHZ > 6400)
#define OBUS0_LO_LIMIT_N (ATTR_FREQ_PB_MHZ * 154)
#define OBUS1_LO_LIMIT_N (ATTR_FREQ_PB_MHZ * 12)
#define OBUS2_LO_LIMIT_N (ATTR_FREQ_PB_MHZ * 74)
#define OBUS3_LO_LIMIT_N (ATTR_FREQ_PB_MHZ * 95)

#define LO_LIMIT_R (ATTR_FREQ_PB_MHZ > 6400)

#define PB_IOOL_FIR_MASK_REG_FIR_LINK0_NO_SPARE_MASK (42)
#define OBUS_LL0_LL0_LL0_PB_IOOL_FIR_MASK_REG_LINK1_TOO_MANY_CRC_ERRORS (47)
#define OBUS_LL0_LL0_LL0_PB_IOOL_FIR_MASK_REG_LINK0_CORRECTABLE_ARRAY_ERROR (52)

#define OCB_O2SST0B (0x6C716)
#define OCB_O2SCMD0B (0x6C717)
#define OCB_O2SWD0B (0x6C718)
#define OCB_O2SRD0B (0x6C719)
#define PERV_ROOT_CTRL6_SCOM (0x50016)
#define PU_PB_CENT_SM0_PB_CENT_FIR_REG (0x5011C00)
#define PU_PB_CENT_SM1_EXTFIR_MASK_REG_OR (0x5011C33)
#define PU_NMMU_MM_EPSILON_COUNTER_VALUE_REG (0x5012C1D)
#define PU_PB_IOE_FIR_MASK_REG_OR (0x5013405)
#define PU_IOE_PB_IOO_FIR_MASK_REG (0x5013803)
#define PU_IOE_PB_IOO_FIR_ACTION0_REG (0x5013806)
#define PU_IOE_PB_IOO_FIR_ACTION1_REG (0x5013807)
#define XBUS_FIR_MASK_REG (0x6010C03)
#define XBUS_1_FIR_MASK_REG (0x6011003)
#define XBUS_2_FIR_MASK_REG (0x6011403)
#define XBUS_0_LL0_LL0_LL0_IOEL_FIR_MASK_REG (0x6011803)
#define XBUS_1_LL1_LL1_LL1_IOEL_FIR_MASK_REG (0x6011C03)
#define XBUS_2_LL2_LL2_LL2_IOEL_FIR_MASK_REG (0x6012003)
#define OBUS_LL0_LL0_LL0_PB_IOOL_FIR_MASK_REG (0x9010803)
#define OBUS_LL0_PB_IOOL_FIR_ACTION0_REG (0x9010806)
#define OBUS_LL0_PB_IOOL_FIR_ACTION1_REG (0x9010807)
#define PU_NPU_SM2_XTS_ATRMISS_POST_P9NDD1 (0x501164A)
#define OBUS_FIR_ACTION0_REG (0x9010C06)
#define OBUS_FIR_ACTION1_REG (0x9010C07)
#define OBUS_FIR_MASK_REG (0x9010C03)
#define OPT_IORESET_HARD_BUS0 (0x9010C20)
#define EQ_QPPM_DPLL_FREQ (0x100F0151)
#define EQ_QPPM_VDMCFGR (0x100F01B6)
#define EQ_QPPM_VDMCFGR (0x100F01B6)

#define OBUS_PHY_FIR_ACTION0 (0x0000000000000000)
#define OBUS_PHY_FIR_ACTION1 (0xFFFFFFFFFFFFC000)
#define OBUS_PHY_FIR_MASK (0xDFFFFFFFFFFFC000)
#define FBC_IOE_TL_FIR_MASK_X2_NF (0x000300C0C0000220ULL)
#define FBC_EXT_FIR_MASK_X2_NF (0x2000000000000000ULL)
#define FBC_IOE_TL_FIR_MASK_X1_NF (0x0018030300000440ULL)
#define FBC_EXT_FIR_MASK_X1_NF (0x4000000000000000ULL)
#define FBC_IOE_DL_FIR_MASK_NF (0xFFFFFFFFFFFFFFFFULL)
#define XBUS_PHY_FIR_MASK_NF (0xFFFFFFFFFFFFC000ULL)
#define FBC_IOE_TL_FIR_MASK_X0_NF (0x00C00C0C00000880ULL)
#define FBC_EXT_FIR_MASK_X0_NF (0x8000000000000000ULL)
#define FBC_IOO_TL_FIR_ACTION0 (0x0000000000000000ULL)
#define FBC_IOO_TL_FIR_ACTION1 (0x0049200000000000ULL)
#define FBC_IOO_TL_FIR_MASK (0xFF2490000FFFF00FULL)
#define FBC_IOO_DL_FIR_ACTION0 (0x0000000000000000ULL)
#define FBC_IOO_DL_FIR_ACTION1 (0xFFFFFFFFFFFFFFFCULL)
#define FBC_IOO_DL_FIR_MASK (0xFCFC3FFFFCC00003ULL)
#define PU_PB_CENT_SM0_PB_CENT_FIR_MASK_REG_SPARE_13 PPC_BIT(13)

#endif
